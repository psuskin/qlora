Dies ist die Beschreibung des Moduls "bbook" mit dem Namen "Belege buchen": Reihenfolge der zu buchenden Belege (Kopf, SubTransaktionen) Transaktion mit Status (Workflow) verbinden und Status weiterschalten Transaktion in Vorgangsordner registrieren (über Transaktionsbeschreibungen) Reihenfolge der zu buchenden Belege (Kopf, SubTransaktionen)Folgendermaßen werden derzeit die Belege gebucht:In der Tabelle wird abgebildet, wie gebucht wird, wenn die verschiedenen Belege (Programmteil) geändert werden (z.B. über das Makro UpdateObject). Die Zahlen zeigen die Reihenfolge. Programmteil Modulname Ausbuchen des Kopfes Ausbuchen der Transaktionen Einbuchen des Kopfes Einbuchen der Transaktionen Besonderheit Lieferschein-Kopf delinedt.mod 1 2 3 4 Einbuchung des Kopfes vor Einbuchung der Transaktion Lieferschein-Pos. delinedt.mod 1 2 Kopf wird nicht ausgebucht Rechnungs-Kopf billiedt.mod 1 2 Transaktionen werden nicht ausgebucht Rechnungs-Pos. invoiitm.mod 1 2 Kopf wird nicht ausgebucht Bestell-Kopf purcoedt.mod 1 2 3 4 STANDARD Bestell-Pos. puroiedt.mod 1 2 3 4 STANDARD Der Stand in den Bestellmodulen soll der Standard werden.Erläuterung zum werdenden Standard:Belegkopf:Wird in einem Modul über das Makro UpdateObject der Kopf verändert, so wird am Anfang des Makros erst mal der Kopf und dann alle Positionen über die entsprechenden Messages ausgebucht:purchaseOrder (-1) SendMsg(BOOK_PURCHASE_ORDER) um den Kopf auszubuchen und.purchaseOrder (-1) SendMsg(BOOK_PURCHASE_ORDER_ITEM) um alle Transaktionen auszubuchen.Nach der Bearbeitung des Kopfes werden über die selben Messages die Belege wieder eingebucht. Anstatt der (-1) wird nun eine 1 auf den Stack gelegt.Belegpositionen:In allen Fällen, in denen die Belege geändert werden, muss zuerst einmal der Belegkopf ausgebucht werden. Dann wird gezielt die eine zu ändernde Transaktion über die entsprechende Message ausgebucht.purchaseOrder (-1) SendMsg(BOOK_PURCHASE_ORDER) um den Kopf auszubuchen und.purchaseOrderItem (-1) SendMsg(BOOK_PURCHASE_ORDER_ITEM) um die aktuelle Position auszubuchenNach den Änderungen (DrainWindow und Co.) müssen die Belege über die gleiche Art eingebucht werden. Anstatt der (-1) wird nun eine 1 auf den Stack gelegt. Allgemeines:Messages:Es ist in jedem Modul, welches Belege ein- oder ausbucht, eine Message nach dem Schema BOOK_XXXXXXX oder BOOK_XXXXXX_ITEM zu definieren. Diese Messages rufen dann ein Makro zum Ausbuchen (BookByEdit[[Item]Back) auf, welches die Belege ausbucht und ein Makro (BookByEdit[[Item]), welches die Belege wieder einbucht.Transaktionsbeschreibungen:In der Transaktionsbeschreibung des Kopfes ist ein Haken bei Subtransaktionen gesetzt und der Wert "false" im nebenstehenden Feld eingetragen. Dies verhindert, dass die Transaktionsbeschreibung durch alle Unterteile läuft, was sie im Normalfall machen würde. Dieser Haken ist natürlich bei den Transaktionsbeschreibungen der Positionen nicht gesetzt. Dies ist die Beschreibung der Funktionalität des Moduls "bbook" mit dem Namen "Belege buchen" bezüglich Transaktionsbeschreibungen/Geschäftsprozesse: Transaktion mit Status (Workflow) verbinden und Status weiterschalten: Transaktion in Vorgangsordner registrieren (über Transaktionsbeschreibungen):.