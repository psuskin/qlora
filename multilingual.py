## Imports
from huggingface_hub import hf_hub_download
from langchain.llms import LlamaCpp

def gguf():
    ## Download the GGUF model
    model_path = hf_hub_download(
        repo_id="lightblue/suzume-llama-3-8B-multilingual-gguf",
        filename="ggml-model-Q4_K_M.gguf",
        resume_download=True
    )

    ## Instantiate model from downloaded file
    llm = LlamaCpp(
        model_path=model_path,
        n_ctx=8192,
        max_tokens=4096,
        n_batch=512,
        n_gpu_layers=100,
        rope_freq_base=500000
    )

    ## Generation kwargs
    generation_kwargs = {
        "max_tokens":4096,
        "echo":False, # Echo the prompt in the output
        "top_k":1 # This is essentially greedy decoding, since the model will always return the highest-probability token. Set this value > 1 for sampling decoding
    }

    ## Run inference
    #prompt = "Was ist der Sinn des Lebens?"

    #text = "Dies ist die Beschreibung der Ersatzteilanfragen App innerhalb der Dokumentation von \"Geschäftsprozesse - Service\" aus dem Modul processes_bprocservice: Neben den Serviceanfragen (Serviceeinsatz) sind Ersatzteilanfragen (Anfragen) die zweite Säule für die Aufnahme von Anfragen im Bereich Service. Über diesen Beleg werden Anfragen von Kunden dokumentiert und sind der Startpunkt für die weitere Bearbeitung. Anfragen, sofern diese von extern ausgelöst wurden, können sich auf eine Industrieanlage, einen Kostenträger oder einen Kundenauftrag beziehen. Anfragen können beliebig tief miteinander verschachtelt, d.h. zu Themen oder Anfrageknoten zusammengefasst werden, die selbst wieder übergeordneten Themen oder Anfrageknoten zugeordnet sind. Diese ist besonders dann von Nutzen, wenn verschiedenen Partner (Mitarbeiter des gleichen Unternehmens oder Dritte, die an der gleichen Anlage arbeiten) eine Anfrage zum gleichen Fall anfragen. Über Anfragen kann dies erkannt werden, so dass keine verschiedenen Angebote zum gleichen Vorfall abgegeben werden. Anfragen unterliegen einem Workflow, der es ermöglicht diese von verschiedenen kaufmännischen und technischen Teammitgliedern bearbeiten zu lassen. So ist es beispielsweise denkbar, dass die technische Abwicklung die benötigten Ersatzteile recherchiert und spezifiziert, während die kaufmännische Abwicklung mit der weiteren Angebotserstellung und Auftragsabwicklung beauftragt ist. Die Ersatzteile können hierbei direkt der Anfrage zugeordnet werden, so dass hieraus Angebote und Aufträge automatisch generiert werden können. Ein Vorteil der Anfrage ist, dass jede Anfrage eine eindeutige Nummer (Ticketnummer) bekommt, welche die Kommunikation mit dem Kunden und Lieferanten (bzgl. technischer Rückfragen) kanalisiert. Zudem können durch hinterlegte Formulare vorgefertigte Emails (Eingangsbestätigung, Rückfragen, etc.) erzeugt werden. Über die Beleghistorie werden die Geschäftsvorfälle dokumentiert. Eingehende Emails können als Dokumentreferenzen mit der Anfrage verknüpft werden, wodurch jeder Mitarbeiter Zugriff auf die beteiligten Kommunikationsobjekte hat.\r\n"
    #text = "Dies ist die 1. Beschreibung der Dokumentation von \"Materialwirtschaft\" aus dem Modul processes_qm_mat: Um ein funktions- und leistungsfähige Materialwirtschaft gewährleisten zu können, müssen zum Einen deren Daten überprüft werden können und zum Anderen Inspektionsläufe und andere Dienste zur Verfügung stehen. Die folgende Liste an Links soll einen Überblick darüber geben, welche Funktionalität hierfür zur Verfügung steht:Teilestamm\n\tLagerstatistik\n\tBereitstellung (Bereitstellungszustand)\n\tMaterialwirtschaft (Modulbeschreibung)\n Bereich Teilestamm:Testbereich / Testname\n\t\t\tKurzbeschreibung\n\t\tTeile\n\t\t\t \n\t\t\n\t\t\tTeileregistrierung\n\t\t\t\n\t\t\tHier wird überprüft, ob alle Variantenteile, von der REP der Variantenteile (CX_ITEM_PATTERN) ausgehend, auch in der REP der Teile (CX_ITEM) registriert sind. Wenn das nicht der Fall ist, wird das entsprechende Variantenteil automatisch in der REP der Teile registriert und außerdem in der Teilestammliste angezeigt.\n\t\t\n\t\t\tKeine Bereitstellungsart\n\t\t\t\n\t\t\tEs werden Teile gesucht, für die keine Bereitstellungsart im Lagerkonto angegeben wurde.\n\t\t\tAchtung! Öffnet man für die gefundenen Teile das Lagerkonto, so wird bereits auch wenn kein Eintrag vorhanden ist, die Bereitstellungsart \"Disposition\" angezeigt. Wird der Speichern Knopf betätigt, so wird diese Bereitstellungsart auch in das Lagerkonto eingetragen.\n\n\t\t\tMögliche Bereitstellungsarten sind:\n\t\t\tDisposition, Lagerführung, Handlager, JIT, Restmenge und Kundenbeistellung\n\t\t\t\n\t\t\n\t\t\tKein Logistik-Kennzeichen\n\t\t\t\n\t\t\tEs werden Teile gesucht, die kein Logistik-Kennzeichen haben. Für die angezeigten Teile muss eingestellt werden, ob sie standardmäßig Kauf- oder Fertigungsteile sind.\n\t\t\n\t\t\tUngültiger Hauptlagerplatz\n\t\t\t\n\t\t\tEs werden Teile gesucht, die einen ungültigen Hauptlagerplatz im Lagerkonto eingetragen haben.\n\t\tLagerkonto\n\t\t\t \n\t\t\n\t\t\tHauptlagerplatz\n\t\t\t\n\t\t\tHier wird für alle Teile mit einem Lagerkonto überprüft, ob das evtl. dort eingestellte Hauptlagerplatzkonto auch in der normalen Unterliste der insgesamt zugeordneten Lagerplatzkonten vorhanden ist. Falls das nicht der Fall ist, so wird das entsprechende Teil in der Teilestammliste angezeigt.\n\t\t\n\t\t\tLagerplätze\n\t\t\t\n\t\t\tIn der aktuellen Version noch nicht unterstützt!\n\t\t\n\t\t\tNegativer Bestand\n\t\t\t\n\t\t\tEs werden Teile gesucht, die einen negativen Lagerbestand aufweisen.\n\t\t\n\t\t\tLagerplätze ohne Inventur seit Datum (mit und ohne Gültigkeit)\n\t\t\t\n\t\t\tEs werden Lagerplätze gesucht, für die nach dem eingegebenen Datum keine Inventur mehr durchgeführt wurde\n\t\t\n\t\t\tUngültige Lagerplätze mit Bestand (positiv oder negativ)\n\t\t\t\n\t\t\tEs werden Lagerplätze gesucht, die ungültig sind und dennoch einen Bestand aufweisen, egal ob dieser positiv oder negativ ist.\n\t\tDispokonto\n\t\t\t \n\t\t\n\t\t\tSaldendifferenzen\n\t\t\t\n\t\t\tZusammenstellen:\n\t\t\tEs wird nach Saldendifferenzen in allen Dispokonto gesucht. Dafür werden alle im Dispokonto aufgeführten Daten herangeholt, nach Belegarten sortiert, deren Mengen getrennt summiert und mit den auf dem Dispokonto befindlichen Summenmengen verglichen. Weichen hier Mengen ab, so spricht man von einer Saldendifferenz. Diese Teile werden in diesem Lauf in der Teilestammliste angezeigt.\n\t\t\tKorrigieren:\n\t\t\tWurden diese Teile bereits ermittelt also in der Teilestammliste angezeigt, so kann über diesen Menüeintrag das Dispokonto für jedes in der Teilestammliste angezeigte Teil neu berechnet, sprich die Summenmengen, und in das Dispokonto hineingeschrieben - also korrigiert - werden.\n\t\t\t\n\t\t\n\t\t\tStornierte oder gestoppte Einträge\n\t\t\t\n\t\t\tEs wird über den Teilestamm in allen Dispokonten geprüft, ob dort Einträge vorhanden sind, die entweder storniert oder gestoppt, trotzdem aber noch im Dispokonto eingebucht sind. Diese Überprüfung wird im Moment nur für Unterpositionen von Kundenaufträgen, Bedarfsanforderungen und Bestellungen gemacht. Die Teile der gefundenen Dispokonten werden in der Teilestammliste angezeigt.\n\t\t\n\t\t\tKeine offene Menge\n\t\t\t\n\t\t\tEs wird über den Teilestamm in allen Dispokonten geprüft, ob dort Einträge vorhanden sind, die keine offene Menge mehr haben, trotzdem aber noch im Dispokonto eingebucht sind. Die Teile mit fehlerhaften Dispokonten werden in der Teilestammliste angezeigt.\n\t\t\n\t\t\tGelöschte Einträge\n\t\t\t\n\t\t\tZusammenstellen:\n\t\t\tEs wird über den Teilestamm in allen Dispokonten geprüft, ob dort Einträge vorhanden sind, die eigentlich gelöscht sind, trotzdem aber noch im Dispokonto eingebucht sind. Die Teile mit fehlerhaften Dispokonten werden in der Teilestammliste angezeigt.Entfernen:\n\t\t\tWurden diese Teile bereits ermittelt also in der Teilestammliste angezeigt, so kann über diesen Menüeintrag das Dispokonto für jedes in der Teilestammliste angezeigte Teil korrigiert, sprich die gelöschten Einträge entfernt werden.\n\t\t\n\t\t\tEinheiten\n\t\t\t\n\t\t\tKonvertierungstabellen:\n\t\t\tHier wird für alle Teile überprüft, ob eine evtl. vorhandene Einheitentabelle in sich konsistent ist. Falls nicht, dann wird das entsprechende Teil in der Teilestammliste angezeigt.Gebuchte Mengen:\n\t\t\tHier wird für alle Teile überprüft, ob die Mengeneinheiten der Einträge sowohl im Lager- als auch im Dispokonto untereinander kompatibel, bezogen auf die jeweilige Einheitentabelle des jeweiligen Teils. Falls das nicht der Fall ist, dann wird das entsprechende Teil in der Teilestammliste angezeigt.\n\t\t\n\t\t\tErledigte Fertigungsauftrags-\n\t\t\tUnterpositionen\n\t\t\t\n\t\t\tEs wird nach Fertigungsaufträgen gesucht, dessen Stufe 0 Fertigungsauftragsposition bereitgestellt und somit aus dem Dispokonto verschwunden ist, die jedoch Unterpositionen haben, welche noch nicht bereitgestellt und somit noch im Dispokonto registriert sind. Sie erhöhen fälschlicherweise die Menge in Fertigung auf dem Dispokonto. \n\t\t\tEs öffnet sich ein Ergebnisfenster, in dem die entsprechenden Stufe > 0 Fertigungsauftragspositionen angezeigt werden. Durch einen Doppelklick gelangt man in den Fertigungsauftrag. \n\t\t\n\t\t\tTeile unterschiedlich in Bestellung und Auftrag\n\t\t\t\n\t\t\tEs werden alle Bestellungen gesucht, die ein anderes Teil haben als in ihrem Vorgänger, entweder Kundenauftrag oder Teileanforderung, angegeben. Die hier untersuchte Konstellation ist nur erlaubt, wenn der Bestelltyp nicht auf \"keine Angabe\" eingestellt ist (siehe hier für mehr Information).\n\t\t\n\t\t\tInkonsistente Beleghistorie\n\t\t\t\n\t\t\tIn der aktuellen Version noch nicht unterstützt!\n\t\t\tEs wird über den Teilestamm in allen Dispokonten geprüft, ob der Nachfolger eines Eintrages in einem bestimmten Dispokonto auch, wenn überhaupt, in dem gleichen Dispokonto eingebucht ist. Ein Nachfolger ohne Einbuchung in ein Dispokonto gilt in diesem Lauf nicht als fehlerhaft. Diese Situation kann nämlich zum Beispiel auftreten wenn ein Folgebeleg schon angelegt aber noch nicht gebucht ist.\n\t\tTeilerollen\n\t\t\t \n\t\t\n\t\t\tFertigungsteil ohne/mit mehreren Fertigungsrollen\n\t\t\t\n\t\t\tEs werden per Lagerkonto definierte Fertigungsteile gesucht, also über das Logistik-KZ, die keine Fertigungsteilrolle bzw. mehrere Fertigungsrollen haben.\n\t\t\n\t\t\tKaufteil ohne/mit mehreren Bestellartikelrollen\n\t\t\t\n\t\t\tEs werden per Lagerkonto definierte Kaufteile gesucht, also über das Logistik-KZ, die keine Bestellartikelrolle bzw. mehrere Bestellartikelrollen haben.\n\t\t\n\t\t\tKein Hauptlieferant\n\t\t\t\n\t\t\tAlle Bestellartikel ohne Hauptlieferant werden angezeigt.\n\t\t\n\t\t\tKein Standardpreis\n\t\t\t\n\t\t\tEs werden alle Teile durchsucht, ob deren Bestellartikel- oder Fertigungsteilrollen einen Standardpreis hinterlegt haben. Falls das nicht der Fall ist, so werden die entsprechenden Teile in der Teilestammliste angezeigt.\n\t\t\n\t\t\tPreistabelle passt nicht zu Standardmenge\n\t\t\t\n\t\t\tEs werden alle Bestellartikelrollen überprüft, ob dort eine Preistabelle angelegt wurde und mit der Standardmenge aber kein Preis in dieser Tabelle ermittelt werden kann.\n\t\t\t(Beispiel: Preistabelleneintrag\n\t\t\t1. Menge>=100 Stück & Menge < 200 Stück = 10€/1Stück\n\t\t\t2. Menge>=200 Stück = 8€/1Stück\n\t\t\t... und die Standardbestellmenge ist 10 Stück)\n\t\tNur über Monitor erreichbar: CheckReceivedQuantities \n\t\t\tPrüft die Menge received.quantity auf dem Lagerkonto gegen alle noch nicht bereitgestellt- oder eingelagerten Wareneingangsmengen.\n\t\t Bereich Lagerstatistik: Testbereich / Testname\n\t\t\tKurzbeschreibung\n\t\t\n\t\t\tTransaktionen ohne Preis\n\t\t\t\n\t\t\tLagerbewegungen ohne Preis werden gesucht und im Ergebnisfenster aufgelistet\n\t\t\n\t\t\tNegative Endbestände\n\t\t\t\n\t\t\tDurch zeitlich versetzte Eingabe von Warenzugängen und Warenentnahmen kann es vorkommen, dass beim Monatsabschluss negative Endbestände auftreten. Diese Teile mit zum ausgewählten Zeitpunkt auftretenden negativen Endbeständen werden im Ergebnisfenster angelistet.\n\t\t\n\t\t\tEndwert bei Nullbestand\n\t\t\t\n\t\t\tEin Lagerplatz hat die Menge 0 (ist leer) aber durch die fließenden Durchschnittspreise und Werte hat sich trotzdem ein Lagerwert ergeben. Diese werden beim Monatsabschluss automatisch korrigiert, sind nur rein informativ vor dem Ausführen des Monatsabschlusses abrufbar.\n\t\t\n\t\t\tAbgänge von Nullbeständen\n\t\t\t\n\t\t\tÄhnlich wie bei den negativen Endbeständen kann es passieren, dass eine Warenauslagerung\r\n"
    text = "Dies ist die 1. Beschreibung der Dokumentation von \"Geschäftsprozesse - Verkauf - Begleitende Auftragskalkulation\" aus dem Modul processes_bpordercalculation: Gerade bei der Projektabwicklung von Werkaufträgen stellt es sich als schwierig dar Kosten zu schätzen/ermitteln und Kosten zu kontrollieren. Dieses Problem wird in ClassiX durch eine begleitende Auftragskalkulation, beginnend in der Projektierung und endend mit der Fertigstellung des Werkes, minimiert.Das Ziel der begleitenden Auftragskalkulation ist es:Übersicht über die Kosten- und Erlössituation zu jedem Zeitpunkt der Projektabwicklung\n\tPräzisierung der Kosten parallel zum Stand der techn. Projektbearbeitung\n\t...\nUm die Ziele der begleitenden Auftragskalkulation zu realisieren werden zu jedem Zeitpunkt der Projektabwicklung die voraussichtlichen Kosten ermittelt. So ergeben sich zu verschiedenen Meilensteinen der Abwicklung folgende Kosten. \n\t\t\tSoll0-Kosten\n\t\t\tSoll1-Kosten\n\t\t\tSoll2-Kosten\n\t\t\tPlan-Ist\n\t\t\tIst-Kosten\n\t\tEbene\n\t\t\tKostenträger (Projekt)\n\t\t\tAngebot\n\t\t\tAuftrag\n\t\t\tAuftrag\n\t\t\tAuftrag\n\t\tGranularität\n\t\t\tTeileklassen / Statistikgruppen\n\t\t\tSchätz-/Erfahrungswerte\n\t\t\t\n\t\t\tAuftragspositionsgenau oder feste Kosten für Gruppen\n\t\t\tStandardbeschaffungskosten der Teils (Einkaufs-/Fertigungsrolle) oder in der Position/Gruppe definierte Schätzkosten.\n\t\t\t\n\t\t\tAuftragspositionsgenau\n\t\t\tAuftragspositionsgenau\n\t\t\ttatsächlich angefallen Kosten\n\t\t\t\n\t\tBetrag\n\t\t\tKosten, Erlöse\n\t\t\tKosten, Erlöse\n\t\t\tKosten, Erlöse\n\t\t\tKosten, Erlöse\n\t\t\tIst-Kosten, Ist-Erlöse\n\t\tBenennung\n\t\t\tProjektplanung/Projektierung\n\t\t\tVorkalkulation\n\t\t\tVorkalkulation\n\t\t\tBewertung der Nachfolgebelege\n\t\t\t(Bestellungen, Stücklisten)\n\t\t\tNachkalkulation\n\t\tFehlerquellen\n\t\t\tFehler in der Projektierung\n\t\t\t \n\t\t\tEngineering, Ausarbeitung zu teuer\n\t\t\t \n\t\t\tFertigung, Umsetzung zu teuer\n\t\t Soll0 - KostenIm Projekt können über die im Netzplan verwendeten Ressourcen Plankosten festgelegt werden. Auf dieser Ebene werden Kosten (Soll0) getrennt nach Statistikgruppen angegeben. Für die Ermittlung dieser Kosten ist also keine detaillierte Kalkulation notwendig, vielmehr geht es darum die Kosten für Gruppen wie Baugruppen, Engineering, Inbetriebnahme und ähnlichen Gruppen zu schätzen.In der Projektierung können zwei Arten von Ressourcen eingeplant werden. Zum einen gibt es Ressourcen, welche sich später im Soll1 des Angebotes und Soll2 des Auftrages wieder finden. So können die im Angebot (Soll1 Kosten) und Auftrag (Soll2 Kosten) geplanten Kosten für Verkaufsartikel über ihrer Statistikgruppe mit den Soll0 Kosten der Ressourcen des Projektes verglichen werden. Zum anderen gibt es aber auch noch Gemeinkostenressourcen. Hierzu zählen Kosten, welche sich nicht an Hand von \"normalen\" Auftragsposition festmachen lassen, sondern das Projekt/den Auftrag allgemein belasten. Dies können Beispielsweise Engineeringstunden oder Projektleiterstunden sein. Diese Art von Kosten werden über die Arbeitsbescheinigungen im Auftrag erfasst. Neben dem Vorteil der Kostenkontrolle bietet die Verwendung der Arbeitsbescheinigung auch den Vorteil, dass die Kapazität der Projektleiter und Konstrukteure im Auge behalten werden kann. Soll1 / Soll2Im Soll1 befinden wir uns auf der Ebene des Angebotes, im Soll2 auf der des Auftrages. Zu diesem Zeitpunkt wird der Liefer- und Leistungsumfanges durch die Angabe von Verkaufsartikeln definiert. Somit findet hier keine Schätzung der Kosten mehr statt, sondern an Hand der Standardbeschaffungskosten/Standardherstellkosten der Teile wird schon ein sehr genaues Soll1/Soll2 ermittelt. Bei Neukonstruktionen können die Kosten auch über eine Vorkalkulation ermittelt werden.Gerade während der Erstellung des Angebotes, wo der Lieferumfang eventuell noch nicht durch Verkaufsartikel bestimmt werden kann, können zum Beispiel Angebotsgruppen mit fixen Plankosten kalkuliert werden, ohne dass eine Ausprägung der Gruppen mit spezifizierten Artikeln erforderlich ist. Erst in einer neuen Angebotsversion oder im Auftrag würden diese fixen Kosten dann entfallen und durch die Summe der Kosten aller Gruppenpositionen ersetzt.Sowohl im Angebot aber vor allem im Auftrag konkurriert eine kaufmännische Sicht der Informationen ganz stark mit einer technischen Sicht. So kann beispielsweise ein Artikel, der dem Kunden angeboten worden ist, aus technischer Sicht gar nicht für die Realisierung des Werkes genutzt werden. Somit kann der Auftrag sich im Laufe der Projektabwicklung ändern, was zu dem Problem führt, dass sich die Sollkosten verändern, ohne dass eine Aussage über die Entwicklung der Kosten abgegeben werden kann. Im Angebot wird dieses Problem durch verschiedene Angebotsversionen gelöst. Im Auftrag geschieht dies ähnlich, so kann hier zum Beispiel aus einer \"Auftragsversion\" eine Angebotsvorgänger erstellt werden. Die Kosten des Auftrages können dann mit der des Angebotes verglichen werden. Ein weiterer Vorteil ist, dass die Auftragsbestätigung mit den Positionen dieses Angebotes gedruckt werden kann.Wichtig ist für den Vergleich der Soll1 mit den Soll2 Kosten, dass die Struktur sich im Laufe der Auftragsabwicklung nicht mehr groß verändert. Nur so ist zum Beispiel gewährleistet, dass die Soll1 Kosten einer Gruppe in der letzten Angebotsversion mit den Soll2 Kosten der Nachfolgergruppe im Auftrag verglichen werden kann.\nFür die Auftragsabwicklung bedeute dies folgendes:1. Es liegt ein Angebot in Classix vor\n1.a Das Angebot ist durch den Vertrieb strukturell richtig erstellt worden und kann sofort in den Auftrag übernommen werden.\n1.b Das Angebot ist strukturell nicht in Ordnung. Der Auftragbearbeiter erstellt somit eine neue Angebotsversion mit richtiger Struktur und überführt dieses in den Auftrag.\n2. Es liegt kein Angebot in ClassiX vor\nDer Auftragsbearbeiter legt den Auftrag vollständig an und erzeugt daraus „rückwärts“ ein Angebot. Dieses dient zur Erstellung der Auftragsbestätigung.\nErgebnis:à Die AB ist in allen Fällen über das Angebot eingefroren und wird von der weiteren Auftragsbearbeitung nicht beeinflusst.à Bei Überführen des Angebots in den Auftrag bzw. bei Erzeugen des Angebots aus dem Auftrag wird der Soll 1 „eingefroren“.à Zur Erstellung der AB wird die letzte Angebotsversion verwendet, die in den Auftrag überführt wurde. Plan-IstÜber die Soll1-/Soll2 Kosten und den dazu gehörenden Erlösen ergibt sich eine Marge, die für den Auftrag angepeilt wird. Das Plan-Ist ist nun ein wichtiger Indikator für das erreichen dieses Zieles, da das Plan-Ist eine Prognose der Ist-Kosten darstellt.Zur Berechnung des Plan-Ist dienen zum einen die Soll2-Kosten, welche nach und nach durch die Bewertung der Kosten der Nachfolger (Gozinto, Bestellung) abgelöst werden, noch bevor die Ist-Kosten angefallen sind. Die Bildung des Plan-Ist entnehmen Sie bitte der nachfolgenden Tabelle.Achtung: Sobald eine Auftragsposition eine Zusatzbestellung als Nachfolger hat, werden diese Kosten als Plan-Ist Kosten der Position gezogen! Die Soll2 Kosten werden dann ignoriert, auch wenn die Position ein Set ist, bei dem sich die Kosten aus den Unterpositionen ergeben!\n Achtung: Bei Set Positionen lässt sich die Bildung des Plan-Ist über den Auftragspositionstypen  steuern!\n \n\t\t\tErmittlung des Plan-Ist\n\t\t\t\n\t\tDispositive Kaufteile\n\t\t\tWenn kein Nachfolger existiert, dann nimmt das Plan ist den Soll2 Wert an und wird grau dargestellt.\n\t\t\tWenn die Auftragsposition einen Bestellnachfolger hat, so wird der Bestellwert als Plan-Ist angenommen. Die Darstellung erfolgt rot, wenn das Plan-Ist den Soll2 Wert überschreitet und im anderen Fall grün.\n\t\t\t\n\t\tDispositive Fertigungsteile\n\t\t\tWenn kein Nachfolgerexistiert, dann nimmt das Plan ist den Soll2 Wert an und wird grau dargestellt.\n\t\t\tNach der techn. Freigabe und der Erstellung des Fertigungsauftrages werden die Kosten für diesen ermittelt und als Plan-Ist angenommen. Die Darstellung erfolgt rot oder grün, ja nach dem Vergleich zum Soll2.\n\t\t\t\n\t\tLagerware\n\t\t\tDas Plan-Ist der Lagerware ist immer gleich dem Soll2 Wert. Dieser wird grau dargestellt, wenn noch keine vertriebliche Freigabe erfolgt ist und anschließend grün. (Die vertriebliche Freigabe führt zum Status Lagerreservierung.)\n\t\tAuftragsgemeinkosten\n\t\t\tDie über Arbeitsbescheinigungen im Auftrag erfasst.\n\t\tDienstleistungen\n\t\t\tWenn für eine Dienstleistungsposition eines Auftrages ein Arbeitsauftrag für eine\r\n"
    prompt = f"""Im Folgenden wird die Beschreibung eines Moduls bereitgestellt. Ihre Aufgabe besteht darin, eine nummerierte Liste realistischer Fragen zu generieren, die sich auf die Modulbeschreibung beziehen, aus der Perspektive eines unbekannten Benutzers, der mehr über eine bestimmte Funktionalität erfahren möchte, die spezifisch für das bereitgestellte Modul ist. Bitte verwenden Sie sowohl die Imperativ- als auch die Interrogativformen und versuchen Sie, Verben für die Fragen nicht zu wiederholen, um die Vielfalt zu maximieren.

    Wenn die von Ihnen geplante Abfrage modulspezifisch erscheint, beziehen Sie sich bitte auf den Modulnamen in der Abfrage. BEZIEHEN SIE SICH NIEMALS AUF EIN MODUL IN EINER FRAGE, OHNE SEINEN NAMEN ZU VERWENDEN. Dies bedeutet, dass Sie das Wort "Modul" in einer Frage niemals verwenden, wenn Sie den Modulnamen nicht angeben. Verwenden Sie beispielsweise NIEMALS die Begriffe "das Modul" oder "dieses Modul" in einer Frage.

    GENERIEREN SIE NUR FRAGEN, DIE AUSSCHLIESSLICH MIT DER MODULBESCHREIBUNG BEANTWORTET WERDEN KÖNNEN. STELLEN SIE KEINE FRAGEN, DIE ZUSÄTZLICHE INFORMATIONEN BENÖTIGEN.

    Modulbeschreibung: {text}"""
    llamaPrompt = f"<|begin_of_text|><|start_header_id|>system<|end_header_id|>\n\nSie sind ein hilfsbereiter, respektvoller und ehrlicher Assistent. Beantworten Sie immer so hilfreich wie möglich, während Sie sicher sind. Wenn Sie die Antwort auf eine Frage nicht kennen, teilen Sie bitte keine falschen Informationen.<|eot_id|><|start_header_id|>user<|end_header_id|>\n\n{prompt}<|eot_id|><|start_header_id|>assistant<|end_header_id|>"

    # https://huggingface.co/lightblue/suzume-llama-3-8B-multilingual/blob/c7b55e87c44c7e8d52ead657715c14abd3f9cda9/tokenizer_config.json#L2052
    #llamaPrompt = f"<|begin_of_text|><|start_header_id|>system<|end_header_id|>\n\nYou are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. If you don't know the answer to a question, please don't share false information.<|eot_id|><|start_header_id|>user<|end_header_id|>\n\n{prompt}<|eot_id|><|start_header_id|>assistant<|end_header_id|>"

    res = llm(llamaPrompt, **generation_kwargs)
    print(res)

import torch
from transformers import AutoModelForCausalLM, AutoTokenizer, BitsAndBytesConfig
def bnb():
    model = AutoModelForCausalLM.from_pretrained(
        "lightblue/suzume-llama-3-8B-multilingual",
        torch_dtype=torch.bfloat16,
        device_map={"": 0},
        quantization_config=BitsAndBytesConfig(
            load_in_4bit=True,
            bnb_4bit_compute_dtype=torch.bfloat16,
            bnb_4bit_use_double_quant=True,
            bnb_4bit_quant_type='nf4',
        )
    )
    tokenizer = AutoTokenizer.from_pretrained("lightblue/suzume-llama-3-8B-multilingual")

    generation_kwargs = {
        #"max_length":4096,
        #"top_k":1
    }

    text = "Dies ist die Beschreibung der Ersatzteilanfragen App innerhalb der Dokumentation von \"Geschäftsprozesse - Service\" aus dem Modul processes_bprocservice: Neben den Serviceanfragen (Serviceeinsatz) sind Ersatzteilanfragen (Anfragen) die zweite Säule für die Aufnahme von Anfragen im Bereich Service. Über diesen Beleg werden Anfragen von Kunden dokumentiert und sind der Startpunkt für die weitere Bearbeitung. Anfragen, sofern diese von extern ausgelöst wurden, können sich auf eine Industrieanlage, einen Kostenträger oder einen Kundenauftrag beziehen. Anfragen können beliebig tief miteinander verschachtelt, d.h. zu Themen oder Anfrageknoten zusammengefasst werden, die selbst wieder übergeordneten Themen oder Anfrageknoten zugeordnet sind. Diese ist besonders dann von Nutzen, wenn verschiedenen Partner (Mitarbeiter des gleichen Unternehmens oder Dritte, die an der gleichen Anlage arbeiten) eine Anfrage zum gleichen Fall anfragen. Über Anfragen kann dies erkannt werden, so dass keine verschiedenen Angebote zum gleichen Vorfall abgegeben werden. Anfragen unterliegen einem Workflow, der es ermöglicht diese von verschiedenen kaufmännischen und technischen Teammitgliedern bearbeiten zu lassen. So ist es beispielsweise denkbar, dass die technische Abwicklung die benötigten Ersatzteile recherchiert und spezifiziert, während die kaufmännische Abwicklung mit der weiteren Angebotserstellung und Auftragsabwicklung beauftragt ist. Die Ersatzteile können hierbei direkt der Anfrage zugeordnet werden, so dass hieraus Angebote und Aufträge automatisch generiert werden können. Ein Vorteil der Anfrage ist, dass jede Anfrage eine eindeutige Nummer (Ticketnummer) bekommt, welche die Kommunikation mit dem Kunden und Lieferanten (bzgl. technischer Rückfragen) kanalisiert. Zudem können durch hinterlegte Formulare vorgefertigte Emails (Eingangsbestätigung, Rückfragen, etc.) erzeugt werden. Über die Beleghistorie werden die Geschäftsvorfälle dokumentiert. Eingehende Emails können als Dokumentreferenzen mit der Anfrage verknüpft werden, wodurch jeder Mitarbeiter Zugriff auf die beteiligten Kommunikationsobjekte hat.\r\n"
    prompt = f"""Im Folgenden wird die Beschreibung eines Moduls bereitgestellt. Ihre Aufgabe besteht darin, eine nummerierte Liste realistischer Fragen zu generieren, die sich auf die Modulbeschreibung beziehen, aus der Perspektive eines unbekannten Benutzers, der mehr über eine bestimmte Funktionalität erfahren möchte, die spezifisch für das bereitgestellte Modul ist. Bitte verwenden Sie sowohl die Imperativ- als auch die Interrogativformen und versuchen Sie, Verben für die Fragen nicht zu wiederholen, um die Vielfalt zu maximieren.

    Wenn die von Ihnen geplante Abfrage modulspezifisch erscheint, beziehen Sie sich bitte auf den Modulnamen in der Abfrage. BEZIEHEN SIE SICH NIEMALS AUF EIN MODUL IN EINER FRAGE, OHNE SEINEN NAMEN ZU VERWENDEN. Dies bedeutet, dass Sie das Wort "Modul" in einer Frage niemals verwenden, wenn Sie den Modulnamen nicht angeben. Verwenden Sie beispielsweise NIEMALS die Begriffe "das Modul" oder "dieses Modul" in einer Frage.

    GENERIEREN SIE NUR FRAGEN, DIE AUSSCHLIESSLICH MIT DER MODULBESCHREIBUNG BEANTWORTET WERDEN KÖNNEN. STELLEN SIE KEINE FRAGEN, DIE ZUSÄTZLICHE INFORMATIONEN BENÖTIGEN.

    Modulbeschreibung: {text}"""
    llamaPrompt = f"<|begin_of_text|><|start_header_id|>system<|end_header_id|>\n\nSie sind ein hilfsbereiter, respektvoller und ehrlicher Assistent. Beantworten Sie immer so hilfreich wie möglich, während Sie sicher sind. Wenn Sie die Antwort auf eine Frage nicht kennen, teilen Sie bitte keine falschen Informationen.<|eot_id|><|start_header_id|>user<|end_header_id|>\n\n{prompt}<|eot_id|><|start_header_id|>assistant<|end_header_id|>"

    res = model.generate(tokenizer(llamaPrompt, return_tensors="pt"), **generation_kwargs)
    print(tokenizer.decode(res[0], skip_special_tokens=True))

if __name__ == "__main__":
    gguf()
    #bnb()